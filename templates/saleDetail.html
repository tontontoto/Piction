<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/saleDetail.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="icon" href="../static/icon/favicon.png">
    <script src="{{ url_for('static', filename='js/saleDetail.js') }}"></script>
    <title>{{ sale.title }} | Piction</title>
</head>
<body>
    {% include 'header.html' %}

<<<<<<< HEAD
    {% if finished %}
    <div class="finishedContent">
        <p>{{ finished }}</p>
    </div>
    <div class="successfulBidderInfo">
        <p>è½æœ­è€…ï¼š{{ bidUserId }}</p>
        <p>è½æœ­é‡‘é¡ï¼š{{ lastAmount }}</p>
    </div>
    
    {% else %}
    <div class="flex-container">
        <div class="main">
            <img src="{{ sale.filePath+'?'+SAS}}" alt="">
        </div>
        <div class="text">
            <h1>{{ sale.title }}</h1>
            <p id="saleId" data-sale-id="{{ sale.saleId }}">{{ sale.saleId }}</p>
            <p>{{ sale.displayName }}</p>
            <p>ã‚«ãƒ†ã‚´ãƒª:{{ categories }}</p>
            <hr>
            <p>åˆ¶ä½œæ™‚é–“:{{ sale.creationTime }}ç§’</p>
            <p>ç¾åœ¨ã®å…¥æœ­ä¾¡æ ¼</p>
            <p id="currentPrice">{{ currentPrice }}å††</p>
            <p>æœ€ä½å…¥æœ­ä¾¡æ ¼</p>
            <p id="minBidPrice">{{ currentPrice + 1 }}å††</p>
            
            <!-- æ®‹ã‚Šæ™‚é–“ -->
            <p>æ®‹ã‚Šæ™‚é–“</p>
            <p>{{ timeDifference }}</p>
            <!-- çµ‚äº†æ™‚é–“ -->
            <p>çµ‚äº†æ—¥æ™‚</p>
            <p id="remainingHour">{{ sale.finishTime }}</p>
        </div>
    </div>
    <br><br>
    <div class="button-contents">
        <div class="botan">
            <div class="addAmountBtn" name="amount">å…¥æœ­é¡ï¼š<span id="addAmount">{{ currentPrice }}</span>å††</div>
        </div>
        <br>
        <div class="botan2">
            <button class="btn" id="addTen">+10</button>
            <button class="btn" id="addHundred">+100</button>
        </div>
        <br>
        <div class="botan">
            <input class="btn" id="specify" type="number" placeholder="é‡‘é¡ã‚’æŒ‡å®š">
        </div>
        <br>
        <br>
        <div class="botan">
            <input type="submit" class="btn2" id="bid" value="å…¥æœ­"></input>
        </div>
    </div>
    <br>
    <div class="bidHistory">
        <h1>å…¥æœ­å±¥æ­´</h1>
        <div class="contents">
            <div class="scroll-contents">
                <table>
                    <tr>
                        <th>å…¥æœ­è€…ID</th>
                        <th>å…¥æœ­é¡</th>
                        <th>æ—¥æ™‚</th>
                    </tr>
                    {% for bid in bids %}
                        <tr>
                            <td>{{ bid.userId }}</td>
                            <td>{{ bid.bidPrice }}å††</td>
                            <td>{{ bid.bidTime.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                        </tr>
                    {% endfor %}
                </table>
=======
    <main class="sale-detail">
        {% if finished %}
        <div class="auction-ended">
            <div class="status-banner">
                <div class="status-icon">ğŸ†</div>
                <h2>ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³çµ‚äº†</h2>
                <p class="end-time">çµ‚äº†æ—¥æ™‚ï¼š{{ sale.finishTime }}</p>
            </div>

            <div class="finished-flex-container">
                <div class="main">
                    <img src="{{ url_for('static', filename=sale.filePath) }}" alt="{{ sale.title }}">
                </div>
                <div class="auction-result">
                    <h1>{{ sale.title }}</h1>
                    <p class="artist">ä½œè€…ï¼š{{ sale.displayName }}</p>
                    <p class="category">ã‚«ãƒ†ã‚´ãƒªï¼š{{ categories }}</p>
                    <div class="winning-bid">
                        <h3>è½æœ­æƒ…å ±</h3>
                        <div class="bid-info">
                            <div class="info-item">
                                <span class="label">è½æœ­è€…</span>
                                <span class="value">{{ bidUserId }}</span>
                            </div>
                            <div class="info-item">
                                <span class="label">è½æœ­ä¾¡æ ¼</span>
                                <span class="value price">Â¥{{ '{:,}'.format(currentPrice) }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="artwork-info">
                        <h3>ä½œå“æƒ…å ±</h3>
                        <div class="info-item">
                            <span class="label">åˆ¶ä½œæ™‚é–“</span>
                            <span class="value">{{ sale.creationTime }}ç§’</span>
                        </div>
                        <div class="info-item">
                            <span class="label">é–‹å§‹ä¾¡æ ¼</span>
                            <span class="value">Â¥{{ '{:,}'.format(sale.startingPrice) }}</span>
                        </div>
                    </div>
                </div>
>>>>>>> main
            </div>
        </div>
        {% else %}
        <div class="flex-container">
            <div class="main">
                <img src="{{ url_for('static', filename=sale.filePath) }}" alt="">
            </div>
            <div class="text">
                <h1>{{ sale.title }}</h1>
                <p id="saleId" data-sale-id="{{ sale.saleId }}">{{ sale.saleId }}</p>
                <p>{{ sale.displayName }}</p>
                <p>ã‚«ãƒ†ã‚´ãƒª:{{ categories }}</p>
                <hr>
                <p>åˆ¶ä½œæ™‚é–“:{{ sale.creationTime }}ç§’</p>
                <p>ç¾åœ¨ã®å…¥æœ­ä¾¡æ ¼</p>
                <p id="currentPrice">{{ '{:,}'.format(currentPrice) }}å††</p>
                <p>æœ€ä½å…¥æœ­ä¾¡æ ¼</p>
                <p id="minBidPrice">{{ '{:,}'.format(currentPrice + 1) }}å††</p>
                
                <!-- æ®‹ã‚Šæ™‚é–“ -->
                <div class="finishTime">
                    <p>çµ‚äº†æ™‚é–“</p>
                    <p id="finishTime" data-finish-time="{{ sale.finishTime }}">{{ sale.finishTime }}</p>
                    <p>æ®‹ã‚Šæ™‚é–“: <span id="remainingTime"></span></p>
                </div>
            </div>
        </div>
        <br><br>
        <div class="button-contents">
            <div class="botan">
                <div class="addAmountBtn" name="amount">å…¥æœ­é¡ï¼š<span id="addAmount">{{ '{:,}'.format(currentPrice) }}</span>å††</div>
            </div>
            <br>
            <div class="botan2">
                <button class="btn" id="addTen">+10</button>
                <button class="btn" id="addHundred">+100</button>
            </div>
            <br>
            <div class="botan">
                <input class="btn" id="specify" type="number" placeholder="é‡‘é¡ã‚’æŒ‡å®š">
            </div>
            <br>
            <br>
            <div class="botan">
                <input type="submit" class="btn2" id="bid" value="å…¥æœ­"></input>
            </div>
        </div>
        <br>
        {% endif %}

        <!-- å…¥æœ­å±¥æ­´ã¯å…±é€šã§è¡¨ç¤º -->
        <div class="bidHistory">
            <h2>å…¥æœ­å±¥æ­´</h2>
            <div class="contents">
                <div class="scroll-contents">
                    <table>
                        <tr>
                            <th>å…¥æœ­è€…</th>
                            <th>å…¥æœ­é¡</th>
                            <th>æ—¥æ™‚</th>
                        </tr>
                        {% for bid in bids %}
                            <tr>
                                <td>{{ bid.userId }}</td>
                                <td>Â¥{{ '{:,}'.format(bid.bidPrice) }}</td>
                                <td>{{ bid.bidTime.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </main>

    {% include 'footer.html' %}
</body>
</html>
