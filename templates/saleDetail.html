<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/saleDetail.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="icon" href="../static/icon/favicon.png">
    <script src="{{ url_for('static', filename='js/saleDetail.js') }}"></script>
    <title>{{ sale.title }} | Piction</title>
</head>
<body>
    {% include 'header.html' %}

    <main class="sale-detail">
        {% if finished %}
        <div class="auction-ended">
            <div class="status-banner">
                <div class="status-icon">üèÜ</div>
                <h2>„Ç™„Éº„ÇØ„Ç∑„Éß„É≥ÁµÇ‰∫Ü</h2>
                <p class="end-time">ÁµÇ‰∫ÜÊó•ÊôÇÔºö{{ sale.finishTime }}</p>
            </div>

            <div class="finished-flex-container">
                <div class="main">
                    {% if config.IS_LOCAL %}
                        <img src="{{ url_for('static', filename=sale.filePath) }}" alt="{{ sale.title }}">
                    {% else %}
                        <img src="{{ sale.filePath }}" alt="{{ sale.title }}">
                    {% endif %}
                </div>
                <div class="auction-result">
                    <h1>{{ sale.title }}</h1>
                    <p class="artist">‰ΩúËÄÖÔºö{{ sale.displayName }}</p>
                    <p class="category">„Ç´„ÉÜ„Ç¥„É™Ôºö{{ categories }}</p>
                    <div class="winning-bid">
                        <h3>ËêΩÊú≠ÊÉÖÂ†±</h3>
                        <div class="bid-info">
                            <div class="info-item">
                                <span class="label">ËêΩÊú≠ËÄÖ</span>
                                <span class="value">{{ bidUserId }}</span>
                            </div>
                            <div class="info-item">
                                <span class="label">ËêΩÊú≠‰æ°Ê†º</span>
                                <span class="value price">¬•{{ '{:,}'.format(currentPrice) }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="artwork-info">
                        <h3>‰ΩúÂìÅÊÉÖÂ†±</h3>
                        <div class="info-item">
                            <span class="label">Âà∂‰ΩúÊôÇÈñì</span>
                            <span class="value">{{ sale.creationTime }}Áßí</span>
                        </div>
                        <div class="info-item">
                            <span class="label">ÈñãÂßã‰æ°Ê†º</span>
                            <span class="value">¬•{{ '{:,}'.format(sale.startingPrice) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="flex-container">
            <div class="main">
                {% if config.IS_LOCAL %}
                    <img src="{{ url_for('static', filename=sale.filePath) }}" alt="{{ sale.title }}">
                {% else %}
                    <img src="{{ sale.filePath }}" alt="{{ sale.title }}">
                {% endif %}
            </div>
            <div class="text">
                <h1>{{ sale.title }}</h1>
                <p id="saleId" data-sale-id="{{ sale.saleId }}">{{ sale.saleId }}</p>
                <p>{{ sale.displayName }}</p>
                <p>„Ç´„ÉÜ„Ç¥„É™:{{ categories }}</p>
                <hr>
                <p>Âà∂‰ΩúÊôÇÈñì:{{ sale.creationTime }}Áßí</p>
                <p>ÁèæÂú®„ÅÆÂÖ•Êú≠‰æ°Ê†º</p>
                <p id="currentPrice">{{ '{:,}'.format(currentPrice) }}ÂÜÜ</p>
                <p>ÊúÄ‰ΩéÂÖ•Êú≠‰æ°Ê†º</p>
                <p id="minBidPrice">{{ '{:,}'.format(currentPrice + 1) }}ÂÜÜ</p>
                
                <!-- ÊÆã„ÇäÊôÇÈñì -->
                <div class="finishTime">
                    <p>ÁµÇ‰∫ÜÊôÇÈñì</p>
                    <p id="finishTime" data-finish-time="{{ sale.finishTime }}">{{ sale.finishTime }}</p>
                    <p>ÊÆã„ÇäÊôÇÈñì: <span id="remainingTime"></span></p>
                </div>
            </div>
        </div>
        <br><br>
        <div class="button-contents">
            <div class="botan">
                <div class="addAmountBtn" name="amount">ÂÖ•Êú≠È°çÔºö<span id="addAmount">{{ '{:,}'.format(currentPrice) }}</span>ÂÜÜ</div>
            </div>
            <br>
            <div class="botan2">
                <button class="btn" id="addTen">+10</button>
                <button class="btn" id="addHundred">+100</button>
            </div>
            <br>
            <div class="botan">
                <input class="btn" id="specify" type="number" placeholder="ÈáëÈ°ç„ÇíÊåáÂÆö">
            </div>
            <br>
            <br>
            <div class="botan">
                <input type="submit" class="btn2" id="bid" value="ÂÖ•Êú≠"></input>
            </div>
        </div>
        <br>
        {% endif %}

        <!-- ÂÖ•Êú≠Â±•Ê≠¥„ÅØÂÖ±ÈÄö„ÅßË°®Á§∫ -->
        <div class="bidHistory">
            <h2>ÂÖ•Êú≠Â±•Ê≠¥</h2>
            <div class="contents">
                <div class="scroll-contents">
                    <table>
                        <tr>
                            <th>ÂÖ•Êú≠ËÄÖ</th>
                            <th>ÂÖ•Êú≠È°ç</th>
                            <th>Êó•ÊôÇ</th>
                        </tr>
                        {% for bid in bids %}
                            <tr>
                                <td>{{ bid.userId }}</td>
                                <td>¬•{{ '{:,}'.format(bid.bidPrice) }}</td>
                                <td>{{ bid.bidTime.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </main>

    {% include 'footer.html' %}
</body>
</html>
